#
# Part of: MMUX Bash Pointers
# Contents: core library
# Date: Sep  9, 2024
#
# Abstract
#
#	This library  must be  sourced from an  interactive shell  or from a  script.  It  loads the
#	shared library and enables the implemented builtins.
#
#	The Bash builtin "enable" will search the shared library file in the usual places, including
#	the directories from "LD_LIBRARY_PATH".
#
# Copyright (C) 2024 Marco Maggi <mrc.mgg@gmail.com>
#
# This program is free software: you can redistribute it and/or modify it under the terms of the GNU
# Lesser General Public  License as published by  the Free Software Foundation, either  version 3 of
# the License, or (at your option) any later version.
#
# This program is distributed in the hope that  it will be useful, but WITHOUT ANY WARRANTY; without
# even the  implied warranty of MERCHANTABILITY  or FITNESS FOR  A PARTICULAR PURPOSE.  See  the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the  GNU Lesser General Public License along with this program.
# If not, see <http://www.gnu.org/licenses/>.
#

declare -rg MMUX_BASH_POINTERS_LIBRARY=libmmux-bash-pointers.so
declare -rg MMUX_BASH_POINTERS_CURRENT=@mmux_bash_pointers_VERSION_INTERFACE_CURRENT@
declare -rg MMUX_BASH_POINTERS_REVISION=@mmux_bash_pointers_VERSION_INTERFACE_REVISION@
declare -rg MMUX_BASH_POINTERS_AGE=@mmux_bash_pointers_VERSION_INTERFACE_AGE@

enable -f "$MMUX_BASH_POINTERS_LIBRARY" mmuxbashpointersinit

# This initialises the library.
if mmuxbashpointersinit
then
    declare MMUX_BASH_LIBC_MATH_BUILTIN
    for MMUX_BASH_LIBC_MATH_BUILTIN in \
	malloc realloc free			\
	       mmuxpointerspointersetschar	mmuxpointerspointerrefschar	\
	       mmuxpointerspointersetuchar	mmuxpointerspointerrefuchar	\
	       mmuxpointerspointersetsint	mmuxpointerspointerrefsint	\
	       mmuxpointerspointersetuint	mmuxpointerspointerrefuint	\
	       mmuxpointerspointersetslong	mmuxpointerspointerrefslong	\
	       mmuxpointerspointersetulong	mmuxpointerspointerrefulong	\
	       mmuxpointerspointersetssize	mmuxpointerspointerrefssize	\
	       mmuxpointerspointersetusize	mmuxpointerspointerrefusize	\
	       mmuxpointerspointersetfloat	mmuxpointerspointerreffloat	\
	       mmuxpointerspointersetdouble	mmuxpointerspointerrefdouble	\
	       mmuxpointerspointersetldouble	mmuxpointerspointerrefldouble
    do enable -f "$MMUX_BASH_POINTERS_LIBRARY" "$MMUX_BASH_LIBC_MATH_BUILTIN"
    done
    unset MMUX_BASH_LIBC_MATH_BUILTIN
fi

alias pointer-set-schar='mmuxpointerspointersetschar'
alias pointer-ref-schar='mmuxpointerspointerrefschar'

alias pointer-set-uchar='mmuxpointerspointersetuchar'
alias pointer-ref-uchar='mmuxpointerspointerrefuchar'

alias pointer-set-sint='mmuxpointerspointersetsint'
alias pointer-ref-sint='mmuxpointerspointerrefsint'

alias pointer-set-uint='mmuxpointerspointersetuint'
alias pointer-ref-uint='mmuxpointerspointerrefuint'

alias pointer-set-slong='mmuxpointerspointersetslong'
alias pointer-ref-slong='mmuxpointerspointerrefslong'

alias pointer-set-ulong='mmuxpointerspointersetulong'
alias pointer-ref-ulong='mmuxpointerspointerrefulong'

alias pointer-set-float='mmuxpointerspointersetfloat'
alias pointer-ref-float='mmuxpointerspointerreffloat'

alias pointer-set-double='mmuxpointerspointersetdouble'
alias pointer-ref-double='mmuxpointerspointerrefdouble'

alias pointer-set-ldouble='mmuxpointerspointersetldouble'
alias pointer-ref-ldouble='mmuxpointerspointerrefldouble'

alias pointer-set-ssize='mmuxpointerspointersetssize'
alias pointer-ref-ssize='mmuxpointerspointerrefssize'

alias pointer-set-usize='mmuxpointerspointersetusize'
alias pointer-ref-usize='mmuxpointerspointerrefusize'

### end of file
# Local Variables:
# mode: sh
# End:
